-- =========================
--   Neovim Config (init.lua)
-- =========================

-- Leader key
vim.g.mapleader = " "
vim.g.maplocalleader = " "
vim.loader.enable()

-- Bootstrap lazy.nvim (gestor de plugins)
local lazypath = vim.fn.stdpath("data") .. "/lazy/lazy.nvim"
if not vim.loop.fs_stat(lazypath) then
  vim.fn.system({
    "git",
    "clone",
    "--filter=blob:none",
    "https://github.com/folke/lazy.nvim.git",
    "--branch=stable", -- última versión estable
    lazypath,
  })
end
vim.opt.rtp:prepend(lazypath)

-- =========================
-- Plugins
-- =========================
require("lazy").setup({
  -- Tema
  { "folke/tokyonight.nvim", lazy = false, priority = 1000, opts = {} },
    { "windwp/nvim-autopairs" }, -- Auto cerrar paréntesis, corchetes
    { "windwp/nvim-ts-autotag" }, -- Auto cerrar tags HTML

    -- Para mejor experiencia de desarrollo
    { "numToStr/Comment.nvim" }, -- Comentarios inteligentes gcc, gbc
    { "kylechui/nvim-surround" }, -- Manipular texto rodeado cs"' ds" ys
    { "folke/trouble.nvim" }, -- Mejor lista de diagnósticos

    -- Para Git más avanzado
    { "tpope/vim-fugitive" }, -- Comandos Git integrados
    { "sindrets/diffview.nvim" }, -- Mejor visualización de diffs 
    -- Señales de Git en la columna lateral
    { "lewis6991/gitsigns.nvim" },

    -- Linting
    {
      "mfussenegger/nvim-lint",
      config = function()
        local lint = require("lint")

        lint.linters_by_ft = {
          javascript = { "eslint_d" },
          typescript = { "eslint_d" },
          python = { "flake8" },
        }

        -- Auto-lint al guardar
        vim.api.nvim_create_autocmd({ "BufWritePost" }, {
          callback = function()
            lint.try_lint()
          end,
        })
      end,
    },

    -- Formatting
    {
      "stevearc/conform.nvim",
      config = function()
        require("conform").setup({
          formatters_by_ft = {
            javascript = { "prettier" },
            typescript = { "prettier" },
            python = { "black" },
          },
        })

        -- Keymap para formatear
        vim.keymap.set("n", "<leader>f", function()
          require("conform").format({ async = true, lsp_fallback = true })
        end, { desc = "Format file" })
      end,
    },
   
    
    {
      "akinsho/toggleterm.nvim",
      version = "*",
      config = function()
        require("toggleterm").setup({
          direction = "float",
          float_opts = {
            border = "curved",
            width = math.floor(vim.o.columns * 0.8),
            height = math.floor(vim.o.lines * 0.8),
          },
          -- Múltiples terminales
          open_mapping = [[<C-\>]], -- Ctrl+\ para toggle rápido
        })

            -- Abrir Claude en una terminal flotante
        vim.keymap.set("n", "<leader>ac", function()
          vim.cmd("ToggleTerm direction=float cmd='claude'")
        end, { desc = "Abrir Claude en flotante" })
      end,
    },
 
    -- Explorador de archivos: oil.nvim
      {
        "stevearc/oil.nvim",
        opts = {},
        dependencies = { "nvim-tree/nvim-web-devicons" },
        config = function()
          require("oil").setup({
            -- Configuración visual
            column = {
                "icon",
                "permissions",
                "size",
                "mtime",
            },
            view_options = {
                show_hidden = true, -- mostrar archivos ocultos
                is_hidden_file = function (name, bufnr)
                    return vim.startswith(name, ".")
                end,
                is_always_hidden = function (name, bufnr)
                    return false
                end,
            },

            -- Configuración de iconos
            use_default_keymaps = true,

            -- Configurar iconos específicos
              win_options = {
                wrap = false,
                signcolumn = "no",
                cursorcolumn = false,
                foldcolumn = "0",
                spell = false,
                list = false,
                conceallevel = 3,
                concealcursor = "nvic",
              },

            -- Configuración de Colores
                highlight = {
                    -- Personalizar Colores
                },
            })
          -- Atajo para abrir Oil en el directorio actual
          vim.keymap.set("n", "-", "<CMD>Oil<CR>", { desc = "Abrir Oil" })
        end,
      },


    -- Atajos interactivos
    {
      "folke/which-key.nvim",
      event = "VeryLazy",
      config = function()
        local wk = require("which-key")
        wk.setup({
          plugins = {
            spelling = { enabled = true, suggestions = 20 },
          },
          window = {
            border = "rounded", -- borde bonito
            position = "bottom",
          },
        })

        -- Registrar tus atajos
        wk.register({
            ["<leader>"] = {
                f = { 
                  name = "+find/format",
                  f = { "Find files" },
                  g = { "Live grep" },
                  b = { "Buffers" },
                  h = { "Help tags" },
                },
                t = {
                  name = "+terminal/toggle",
                  t = { "Terminal horizontal" },
                  v = { "Terminal vertical" },
                  f = { "Terminal float" },
                  h = { "Terminal horizontal" },
                },
                x = {
                  name = "+diagnostics",
                  x = { "Toggle Trouble" },
                  w = { "Workspace diagnostics" },
                  d = { "Document diagnostics" },
                },
                g = {
                  name = "+git",
                  b = { "<cmd>Git blame<cr>", "Blame" },
                  d = { "<cmd>DiffviewOpen<cr>", "Diff view" },
                },
                c = { name = "+code" },
                w = { "Save" },
                q = { "Quit" },
                h = { "No highlight" },
            },
          ac = { "Abrir Claude flotante" },
          ["-"] = { "Abrir Oil" },
        }, { prefix = "<leader>" })
      end,
    },

  -- Dashboard con waifu
  {
    "goolord/alpha-nvim",
    dependencies = { "nvim-tree/nvim-web-devicons" },
    config = function()
      local alpha = require("alpha")
      local dashboard = require("alpha.themes.dashboard")

      --  ASCII Art
      local headers = {
          -- Waifu 1
        {
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⣿⣷⣦⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⠀⠀⠀⠀]],
          [[⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⣿⣿⣿⣿⣿⣿⣷⣤⣀⠀⠀⠀⠀⠀⠉⠑⣶⣤⣄⣀⣠⣤⣶⣶⣿⣿⣿⣿⡇⠀⠀⠀]],
          [[⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⡿⠟⠋⠁⠀⠀⠀⣀⠤⠒⠉⠈⢉⡉⠻⢿⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⠀]],
          [[⠀⠀⠀⠀⣀⣴⣶⣿⣷⡄⠀⠀⠀⠀⢹⣿⣿⣿⣿⠏⠁⠀⢀⠄⠀⠀⠈⢀⠄⠀⢀⡖⠁⠀⢀⠀⠈⠻⣿⣿⣿⣿⡏⠀⠀⠀⠀]],
          [[⠀⠀⢠⣾⣿⣿⣿⣿⡿⠁⠀⠀⠀⠀⢸⣿⣿⠏⠀⠀⢀⡴⠁⠀⠀⣠⠖⠁⢀⠞⠋⠀⢠⡇⢸⡄⠀⠀⠈⢻⣿⣿⠁⠀⠀⠀⠀]],
          [[⠀⣠⣿⣿⣿⣿⣿⠟⠁⠀⠀⠀⠀⠀⢸⡿⠁⠀⠀⢀⡞⠀⠀⢀⡴⠃⠀⣰⠋⠀⠀⣰⡿⠀⡜⢳⡀⠘⣦⠀⢿⡇⠀⠀⠀⠀⠀]],
          [[⢠⣿⣿⣿⣿⡿⠃⠀⠀⠀⠀⠀⠀⢰⣿⠃⠀⢀⠆⡞⡄⠀⣠⡞⠁⣀⢾⠃⠀⣀⡜⢱⠇⣰⠁⠈⣷⠂⢸⡇⠸⣵⠀⠀⠀⠀⠀]],
          [[⣿⣿⣿⣿⡿⠁⠀⠀⠀⠀⠀⠀⢠⣿⠇⠀⠀⡜⣸⡟⢀⣴⡏⢠⣾⠋⡎⢀⣼⠋⢀⡎⡰⠃⠀⠀⣿⣓⢒⡇⠀⣿⠀⠀⠀⠀⠀]],
          [[⣿⣿⣿⣿⠇⠀⠀⠀⠀⠀⠀⠴⢻⣟⢀⣀⢀⣧⡇⢨⠟⢾⣔⡿⠃⢸⢀⠞⠃⢀⣾⡜⠁⠀⠀⠀⡏⠁⢠⠃⠀⢹⠀⠀⠀⠀⠀]],
          [[⣿⣿⣿⣿⡄⠀⠀⠀⠀⠀⠀⠀⢸⣼⢸⣿⡟⢻⣿⠿⣶⣿⣿⣿⣶⣾⣏⣀⣠⣾⣿⠔⠒⠉⠉⢠⠁⡆⡸⠀⡈⣸⠀⠀⠀⠀⠀]],
          [[⣿⣿⣿⣿⣇⠀⠀⠀⠀⠀⠀⠀⣸⣿⣸⣿⣇⢸⠃⡄⢻⠃⣾⣿⢋⠘⣿⣿⠏⣿⡟⣛⡛⢻⣿⢿⣶⣷⣿⣶⢃⣿⠀⠀⠀⠀⠀]],
          [[⢸⣿⣿⣿⣿⣆⠀⠀⠀⠀⠀⣰⠃⣿⣿⣿⣿⠀⣸⣧⠈⣸⣿⠃⠘⠃⢹⣿⠀⣿⠃⠛⠛⣿⡇⢸⣿⡇⢸⣿⡿⣿⡀⠀⠀⠀⠀]],
          [[⠀⠻⣿⣿⣿⣿⣦⡀⠀⢀⡔⣹⣼⡟⡟⣿⣿⣿⠛⠻⠶⠿⠷⣾⣿⣿⣬⣿⣠⣿⣀⣿⣿⣿⡇⠸⡿⠀⣾⡏⢠⣿⣇⠀⠀⠀⠀]],
          [[⠀⠀⠙⢿⣿⣿⣿⣿⣷⡞⢠⣿⢿⡇⣿⡹⡝⢿⡷⣄⠀⠀⠀⠀⠀⠀⠀⠉⠉⠉⠙⠛⠛⠻⠿⣶⣶⣾⣿⣇⣾⠉⢯⠃⠀⠀⠀]],
          [[⠀⠀⠀⠀⠙⠿⣿⣿⣿⠇⢸⠇⠘⣇⠸⡇⣿⣮⣳⡀⠉⠂⠀⠀⣀⣤⡤⢤⣀⠀⠀⠀⠀⠀⢈⣿⠟⣠⣾⠿⣿⡆⡄⣧⡀⠀⠀]],
          [[⠀⠀⠀⠀⠀⠀⠀⠙⠻⡘⠾⣄⠀⠘⢦⣿⠃⠹⣿⣿⣶⠤⠀⠀⣿⠋⠉⠻⣿⠁⠀⠠⣀⣤⣾⣵⣾⡿⠃⣾⠏⣿⣧⠋⡇⠀⠀]],
          [[⠀⠀⠀⠀⠀⠀⠀⣠⠖⠳⣄⡈⠃⠀⠼⠋⠙⢷⣞⢻⣿⣿⣀⡀⠈⠤⣀⠬⠟⠀⢀⣠⣶⠿⢛⡽⠋⣠⣾⣏⣠⡿⣃⣞⠀⠀⠀]],
          [[⠀⠀⠀⠀⠀⠀⠀⣧⠀⠀⠀⠉⠛⠓⠢⠶⣶⡤⠺⡟⢺⣿⠿⣿⣶⣤⣀⣠⣴⣾⡿⠿⢵⠋⠙⠲⣏⡝⠁⠀⣹⢿⡣⣌⠒⠄⠀]],
          [[⠀⠀⠀⠀⠀⠀⢸⠈⡄⠀⠇⠀⠀⡖⠁⢢⡞⠀⢰⠻⣆⡏⣇⠙⠻⣿⣿⣿⣿⠋⢀⡴⣪⢷⡀⠀⡘⠀⢀⠜⠁⢀⠟⢆⠑⢄⠀]],
          [[⠀⠀⠀⠀⠀⠀⠘⡄⠱⠀⠸⡀⠄⠳⡀⠀⢳⡀⢰⠀⢸⢇⡟⠑⠦⢈⡉⠁⢼⢠⡏⣴⠟⢙⠇⠀⡇⢠⠃⢀⡴⠁⠀⠘⠀⠈⡆]],
          [[⠀⠀⠀⠀⠀⠀⠀⠇⠀⠣⠀⡗⢣⡀⠘⢄⠀⢧⠀⢳⡟⠛⠙⣧⣧⣠⣄⣀⣠⢿⣶⠁⠀⠸⡀⠀⠓⠚⢴⣋⣠⠔⠀⠀⠀⠀⠁]],
          [[⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠧⡤⠙⢤⡈⣦⡼⠀⠀⠧⢶⠚⡇⠈⠁⠈⠃⠀⡰⢿⣄⠀⠀⠑⢤⣀⠀⠀⠀⠈⠁⠀⠀⠀⠀⠀]],
        },

          -- Waifu 2
        {
          [[  ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠎⠀⠀⡞⡷⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⢧⠘⡍⢳⡀⠀⠀]],
          [[  ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡞⠀⠀⢠⡇⡇⠹⡄⠀⣀⡠⠤⠴⠒⠒⠒⠒⠒⠒⠒⠢⠤⠤⣀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡔⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⢇⠹⡄⢧⠀⠀]],
          [[  ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡜⠀⠀⠀⠈⣷⡇⠀⣻⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠒⠤⢄⡀⠀⠀⠀⣼⢡⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⡀⠱⡈⡇⠀]],
          [[  ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⠅⠀⠀⢀⣴⣿⡇⢠⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠑⠢⣼⢹⣼⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡇⠀⢳⡸⡄]],
          [[  ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠇⠄⠀⡰⠋⠘⢿⣿⡾⢀⡤⠒⠚⠉⠉⠉⠉⠑⠒⠒⠒⠤⠤⠤⠀⣀⡀⠀⠀⠀⠀⠀⠀⠀⡇⡏⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⠀⠀⢇⢳]],
          [[  ⠀⠀⠘⡄⠀⠀⠀⠀⠀⠀⡼⠸⠀⡼⠁⣠⠔⠳⡉⠀⡜⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠒⠦⣄⡀⠀⠀⡇⣧⡟⣹⠦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡇⠀⠸⡈]],
          [[  ⠀⠀⠀⠸⡀⠀⠀⠀⠀⢠⠇⡄⣜⡠⠊⠁⠀⠀⠑⠞⢸⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⢳⠀⢻⡿⢡⡟⠀⠙⢄⠀⠀⠀⠀⠀⠀⠀⠠⡀⢹⠀⠀⢧]],
          [[  ⠀⠀⠀⠀⢱⠀⠀⠀⠀⡸⢀⠛⠋⠀⠀⠀⠀⠀⠀⢀⣾⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢇⠀⢀⢤⣀⠀⠀⠈⢳⡀⠀⠀⠀⠀⠀⠀⠃⢸⠀⠀⠘]],
          [[  ⠀⠀⠀⠀⠀⢣⢀⡠⠖⡇⠸⠀⠀⠀⡀⠀⠀⠀⢀⢞⣼⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⠊⠁⠀⠈⠳⢄⠀⠀⢱⡀⠀⠀⠀⠀⠀⠈⢸⠀⠀⠀]],
          [[  ⠀⠀⠀⠀⢀⠞⠉⠀⠀⡇⠀⠀⠀⠀⡇⠀⠀⢀⣾⠋⡼⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡟⠀⠀⠀⠀⠀⠀⠙⢦⡀⢳⡀⠀⠀⠀⠀⠀⢸⠀⠀⠀]],
          [[  ⠀⠀⠀⡶⠃⠀⢀⠄⣰⡇⠀⠀⠀⢠⠇⠀⢀⡾⠁⠀⡇⠀⡏⠀⠀⠀⠀⠀⣠⠀⠀⠀⠀⠀⠀⠀⢸⠀⠀⠀⠀⠀⠀⠀⣇⠀⠀⠀⢦⠀⠀⠀⠀⠙⠦⣷⠀⠀⠀⠀⠀⢸⠀⠀⠀]],
          [[  ⠀⠀⢠⠇⠀⣰⣣⠔⢹⠀⠀⠀⠀⢸⠀⠀⡜⠀⠀⠀⡇⢠⡇⠀⠀⠀⠀⠀⡇⠀⠀⠀⠀⠀⠀⠀⣿⠀⠀⠀⠀⠀⠀⠀⠹⡄⠀⠂⢸⠀⠀⠀⠀⠀⠀⠈⠁⠀⠀⠀⠀⢸⠀⠀⠀]],
          [[  ⠀⠀⣸⠀⢠⢻⠃⠀⣸⠀⠀⠀⠀⢸⠀⡼⢥⡀⠀⠀⢣⢸⢻⠀⠀⠀⠀⠀⡇⠀⠀⠀⠀⠀⠀⢀⡿⡀⠀⠀⠀⠀⠀⢠⣇⢳⠀⠀⠀⡇⢠⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⠀⠀⠀]],
          [[  ⠀⠀⡇⠀⡎⡏⠀⠀⣿⠀⠀⠀⠀⢸⢰⠁⠀⠙⢶⣄⣸⠸⢻⡀⠀⠀⠀⠀⡇⠀⡄⠀⠀⠀⠀⢸⢰⡇⠀⠀⠀⠀⠀⢸⠈⢿⡆⠀⠀⢻⠘⠀⠀⠀⠀⠀⠀⣰⠀⠀⠀⢸⠀⠀⠀]],
          [[  ⠀⠀⡇⢰⢣⠁⠀⢸⠻⠀⠀⠀⠀⣿⠆⠀⠀⠀⠀⠉⢻⣿⣬⣇⠀⠀⠀⠀⣇⠀⡇⠀⠀⠀⠀⣾⠏⡇⢤⠀⠀⠀⠀⣇⡠⠬⢷⠀⠀⢸⡆⠀⠀⠀⠀⠀⠀⠇⠀⠀⠀⢸⠀⠀⠀]],
          [[  ⠀⠀⢳⢸⢸⠀⠀⢸⡆⠀⠀⠀⠀⡿⢖⣒⣶⣤⣄⡓⠾⣯⣙⠺⣀⠀⠀⠀⣿⠀⣿⠀⠀⠀⢠⠏⢀⡁⣼⠀⠀⢠⣿⠁⠀⠀⠈⡆⠀⠀⡇⠀⠀⠀⠀⠀⢸⠀⠀⠀⠀⡿⠀⠀⠀]],
          [[  ⠀⠀⢸⣸⣸⠀⠀⠀⡇⠀⠀⠀⠀⡇⠀⠙⠛⠛⠻⠿⣿⣿⣝⡳⣿⣧⠀⠀⡿⡄⡧⡆⠀⠀⣸⣏⣛⡇⣿⠀⢀⣾⡏⠀⠀⠀⠀⢱⠀⢠⠃⠀⠀⠀⠀⠀⡏⠑⣆⠀⠀⡇⠀⠀⠀]],
          [[  ⠀⠀⠀⡇⢻⠀⠀⠀⡇⠀⠀⠀⠀⡇⠀⠀⠀⠀⠀⠀⠀⠀⠉⠙⠚⠏⢧⠀⡇⢇⢱⢱⡀⠀⣇⠤⠒⣿⢻⢀⣎⣈⣠⣤⣤⣤⣄⣈⣇⢸⠀⠀⠀⠀⠀⣸⠋⠳⣼⠀⢐⠇⠀⠀⠀]],
          [[  ⠳⣄⠀⢱⠈⠀⠀⠀⡇⠀⠀⠀⠀⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠁⠁⠈⠙⠠⢥⣈⠀⠐⠚⠛⡿⠛⠛⠛⠛⠻⠛⠻⠗⠚⠻⡟⠀⠀⠀⠀⢀⡏⠉⢚⡏⠀⢸⠀⠀⠀⢠ ]],
          [[  ⣷⣈⠳⣌⡇⠀⠀⠀⢹⠀⠀⠀⠀⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠠⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡇⠀⠀⠀⠀⣸⠀⠀⡜⠀⠀⢸⠀⢀⡴⣿]],
          [[  ⣿⣿⣷⡈⢻⠀⠀⠀⢸⠀⠀⠀⠀⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⡇⠈⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⠁⠀⠀⠀⢀⠇⢀⡼⠁⠀⠀⣤⢔⣿⣿⣿]],
          [[  ⣿⣿⣿⣷⣶⣆⠀⠀⢸⠀⠀⠀⠀⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢚⠓⠲⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⠀⠀⠀⠀⢸⣠⠞⠀⠀⠀⠀⣿⣿⣿⠟⠁]],
          [[  ⣿⣿⣿⣿⣿⣿⡄⠀⠘⡆⠀⠀⠀⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡏⠀⠀⠀⠀⡞⠁⠀⠀⠀⠀⠀⣿⠟⠉⠀⠀]],
          [[  ⣿⣿⣿⣿⣿⣿⣷⡀⠀⡇⠀⠀⠀⢹⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⠇⠀⠀⠀⢠⠇⠀⠀⠀⠀⠀⢠⡇⠀⠀⠀⠀]],
          [[  ⣿⣿⣿⣿⣿⣿⣿⣧⠀⢧⠀⠀⠀⢸⢳⡀⠀⠀⠀⠀⠀⠀⢀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣀⣴⡀⠀⠀⠀⠀⠀⠀⠀⠀⣼⠀⠀⠀⠀⡸⠀⠀⠀⠀⠀⠀⡸⡇⠀⠀⠀⠀]],
          [[  ⣿⣿⣿⣿⣿⣿⣿⣿⡆⢸⠀⠀⠀⠸⡆⠑⣄⠀⠀⠀⠀⠀⠈⣿⢍⠉⠑⠒⠒⠒⠒⠒⠈⠉⢉⣁⣀⣾⡇⠀⠀⠀⠀⠀⠀⢀⠞⡏⠀⠀⠀⢀⡇⠀⠀⠀⠀⠀⢀⡇⡇⠀⠀⠀⠀]],
          [[  ⣿⣿⣿⣿⣿⣿⣿⣿⣿⡜⡆⠀⠀⠀⡇⠀⡇⠑⢄⡀⠀⠀⠀⠘⠲⠤⣀⣀⡀⠀⠀⠀⠀⣁⣉⡤⠼⠛⠁⠀⠀⠀⠀⢀⠔⠁⠀⡇⠀⠀⠀⢸⠀⠀⠀⠀⠀⠀⡼⠀⡇⠀⠀⠀⠀]],
          [[  ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⠁⠀⠀⠀⡇⠀⡇⠀⠀⠙⢦⡀⠀⠀⠀⠀⠀⠀⠉⠁⠉⠉⠉⠁⠀⠀⠀⠀⠀⠀⠀⢀⡴⠋⠀⠀⢀⠀⠀⠀⠀⡎⠀⠀⠀⠀⠀⢠⠇⠀⣧⡀⠀⠀⠀ ]],
          [[  ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣇⠀⠀⠀⢀⠀⣇⠀⠀⠀⠀⠉⠢⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⡴⠚⠁⠀⠀⠀⠀⢸⠀⠀⠀⢠⠃⠀⠀⠀⠀⠀⡜⠀⢀⡲⠙⠢⡀⠀ ]],
          [[  ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡀⠀⠀⢸⠀⡇⠳⡄⠀⠀⠀⠀⠈⠢⡀⠀⠀⠀⠀⠀⠀⠀⠀⣀⡤⠔⡻⠋⠀⠀⠀⠀⠀⠀⠀⡞⠀⠀⠀⢸⠀⠀⠀⠀⠀⢀⠃⠀⢸⡶⠀⠁⠹⢦   ]],
          [[  ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⠀⠸⡄⣧⠀⠈⠢⡀⠀⠀⠀⠀⠈⠲⢄⣀⣤⣤⠒⠊⠉⢀⡠⠞⠁⠀⠀⠀⠀⠀⠀⠀⠀⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⣸⠀⠀⢸⠀⣾⣦⣆⡈   ]],
          [[  ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⡇⣟⣣⠀⠀⠙⢆⠀⠀⠀⠀⠀⠀⠀⠀⠈⠉⠓⠒⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⠃⠀⠀⠀⡇⠀⠀⠀⠀⢠⠇⠀⠀⣼⣸⣿⣿⣿⣿   ]],
          [[  ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣇⠀⠀⢹⣿⣿⣧⡀⠀⠀⠑⢄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⣿⠀⠀⠀⢀⠇⠀⠀⠀⠀⡜⠀⠀⠀⡇⣿⣿⣿⣿⣿   ]],
        },
          -- Waifu 3
        {
          [[  ⠀⠀⠀⠀⠀⠀⠀⢀⣤⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣄⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀]],
          [[  ⠀⠀⠀⠀⠀⢀⣴⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣦⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀]],
          [[  ⠀⠀⠀⠀⣰⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀]],
          [[  ⠀⠀⠀⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡄⠀⠀⠀⠀⠀⠀⠀⠀]],
          [[  ⠀⠀⣼⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⡀⠀⠀⠀⠀⠀⠀⠀]],
          [[  ⠀⣰⣿⣿⣿⣿⣿⣿⢻⣿⣿⠏⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⠀⠀⠀⠀⠀⠀⠀]],
          [[  ⢀⣿⣿⣿⣿⣿⡟⣿⡟⠘⣿⡇⢞⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣆⠀⠀⠀⠀⠀⠀]],
          [[  ⢸⣿⣿⣿⣿⣿⣷⣿⡇⠀⠹⣿⣧⠼⢾⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡆⠀⠀⠀⠀⠀]],
          [[  ⣿⣿⣿⣿⣿⣿⣿⣹⣗⠒⠋⠙⢿⣆⠈⢫⣿⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡀⠀⠀⠀⠀]],
          [[  ⣿⣿⣿⣿⣿⣻⣿⠘⢿⠀⠠⣖⣿⣿⣿⣿⣿⣿⢿⣿⣿⣿⣿⣿⣿⠚⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⠀⠀⠀⠀]],
          [[  ⢹⣿⣿⣿⣿⣿⣿⡄⠀⠣⠀⠻⠋⠀⠘⣿⠿⠛⢆⢻⣿⣿⣿⣿⣿⢈⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⠀⠀]],
          [[  ⣼⣿⣿⣿⣿⠛⣿⡷⣀⠀⠀⠀⠀⠉⠉⠀⠀⠀⠘⣄⣿⣿⣿⣿⣿⣍⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⡀⠀⠀]],
          [[  ⡇⣿⣿⣿⣿⡗⠈⠀⠈⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠘⣿⣿⣿⣿⣿⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⡇⠀⠀]],
          [[  ⡇⢿⣿⣿⣿⣷⠾⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠃⡇⠀⠀]],
          [[  ⡇⢸⣿⣿⣿⣿⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣹⡿⢿⠿⠒⠓⠒⠂]],
          [[  ⢣⠸⣿⣿⣿⣿⣷⡀⠀⠀⣀⣤⡀⠀⠀⠀⠀⠀⠀⠀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢇⡿⠋⠀⠁⠀⠀⠀⠀⠀]],
          [[  ⠸⠀⣿⣿⣿⣿⣿⣷⣄⡀⠘⠭⠄⠀⠀⠀⠀⠀⠀⡗⣿⣿⣿⢸⣿⣿⣿⣿⡟⣽⢿⠞⢀⣀⣀⣀⠀⠀⠀⠀⠀⠀]],
          [[  ⠀⢇⢹⣿⢹⣿⣿⣿⣿⠙⣦⡀⠀⠀⠀⠀⣀⡤⠴⢿⣿⣿⣿⡏⠀⣿⡟⣿⡿⠋⢰⠋⡸⠉⠁⠀⠀⢀⡤⠚⠁⠀⠀]],
          [[  ⠀⠈⠛⣿⢀⢿⣿⡿⣿⠀⣿⡙⠲⠒⠒⠉⠙⠢⠀⣿⣿⣿⣿⡇⠀⣹⠙⠏⠁⢀⠎⢠⠃⠀⠀⡠⠖⠁⠀⠀⠀⠀⠀]],
          [[  ⠀⠀⠀⠹⣿⠀⢻⣷⡿⡐⠋⠁⠀⠀⠀⠀⠀⠀⣰⢟⣿⢏⡞⢻⢷⠏⠀⠀⠀⢸⣰⠃⢀⡤⠊⠀⡠⠴⠒⠉⠀⠀⠀]],
          [[  ⠀⠀⠀⠀⠹⣇⠀⠙⠢⠀⠀⠀⠀⠀⠀⠀⠀⠚⠁⠞⢁⣾⠃⡇⢸⣆⠀⠀⠀⢀⣇⡰⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀]],
          [[  ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣾⢻⠀⠀⢸⡿⣧⡀⠀⡼⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀]],  
        },
          -- Waifu 4
        {
          [[⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⢤⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀       ]],
          [[⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣸⠸⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀       ]],
          [[⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡏⠀⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀       ]],
          [[⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣷⡀⠘⣇⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀       ]],
          [[⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⠘⡄⠀⠀⠀⠀⠀⠀⣀⣴⣶⣿⣿⣿⣿⡆⠀⠙⢿⣿⣿⣿⣶⣦⣄⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀       ]],
          [[⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⠀⢳⡀⠀⠀⣠⣴⣿⣿⣿⣿⣿⣿⣿⡟⠇⠀⢠⣦⠹⢿⣿⣿⣿⣿⣿⣿⣦⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀       ]],
          [[⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠐⢸⣇⠀⠙⢀⣾⡿⠿⣛⣛⣭⣭⣥⣤⣤⡍⢄⠀⢼⠅⣾⣦⣿⣿⣿⣿⣿⣿⣿⣿⣷⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢻⠄⠰⢛⣥⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣎⣋⠴⣶⣦⣍⡻⣿⣿⣿⣿⣿⣿⣿⣿⣯⡢⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⣿⣿⣿⣿⣿⣿⣿⢻⣿⡿⣿⣿⡏⢻⡆⣌⢻⣯⡁⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⣷⣾⣿⣿⣿⣿⣿⣿⣿⡇⢸⣿⡇⣿⣿⡇⢸⡇⢿⣆⠻⡇⣼⣿⣿⣿⣿⣿⣧⢿⣿⣿⣿⡆⠀⠀⠀⠀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⣿⣿⣿⣿⣸⣿⢸⣿⣿⣿⡇⡆⣿⡇⢻⣿⡇⠀⡇⣈⠻⣧⡙⢿⣿⣿⢹⣿⣿⣿⠸⣿⣿⣿⣷⠀⠀⠀⠀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⣿⣿⣿⢿⡇⣿⣿⢸⣿⣿⣿⡇⡇⢿⡇⢸⣿⣷⠀⠇⣿⣶⡙⣷⣾⣿⣿⢸⣿⡟⢿⡄⣿⣿⣿⣿⡄⠀⠀⠀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢠⣿⢻⣿⣿⢸⡇⣿⣿⠘⡟⣿⣿⡇⡇⢸⡇⠀⣋⣥⢀⡆⣿⣿⣦⡈⢿⣿⣿⣼⣿⠧⠠⠡⢻⣿⣿⣿⡇⠀⠀⠀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⡇⣿⣿⣿⣿⡇⢿⣿⠃⡇⣿⣿⣷⠀⣅⣆⠘⠉⠁⠀⢁⣈⢛⠛⠃⢸⣿⣿⣿⣿⡆⢃⠀⢸⣿⣿⣿⡆⠀⠀⠀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⠁⣿⢸⣿⢿⡇⢸⣛⠀⠹⠘⡇⣿⣸⣼⢏⣠⣆⠸⠅⠀⢙⣀⣾⡇⢸⣿⣿⢹⣿⠃⠀⠀⠈⢸⣿⣿⡇⠀⠀⠀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣿⠀⣿⠸⣿⠈⣧⢀⠙⠁⠀⠆⣿⣼⣿⣿⣿⣿⣶⣶⣶⣾⣿⣿⣿⡇⢸⢹⡇⣿⣿⠀⢶⣭⠃⢸⣿⢻⣷⠀⠀⠀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠹⡄⢉⠀⢿⡔⠹⠀⣶⣦⠇⠂⣸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⠈⣼⣿⣿⡟⣰⣦⣻⡷⢸⣿⣾⡏⠀⠀⠀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡖⠂⠀⠸⡌⣧⣷⠁⢹⣧⣖⠻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⢠⣿⣿⣿⡇⢿⡝⣿⠇⣌⣿⡟⣿⡆⠐⠀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⠏⠀⡐⣰⣷⢠⢹⣿⡇⢸⣿⣿⣷⣌⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡇⣼⣿⣿⣿⢁⣨⠄⠋⠀⣿⣿⡇⠿⢿⡀⠂⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⠇⢀⡜⣱⣿⡿⠈⢸⣿⣇⠀⣿⣿⣿⣿⣿⠿⠿⠿⠿⣿⣿⣿⣿⣿⣿⡿⢠⣿⢏⣿⡏⣘⠋⠀⠄⣇⢳⣿⣿⠀⠂⢻⡀⠀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⠏⣠⡿⢃⣾⣿⠇⠼⢸⣿⣿⢰⠘⢿⣿⣿⣿⣦⣿⣿⣷⣾⣿⣿⣿⣿⣿⠃⢸⣿⢸⣿⣿⣿⠀⠀⠀⢸⢸⣿⣿⡄⡀⠀⢿⡀⠀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣴⣷⣾⠟⢁⣿⣿⡟⡘⣼⢸⣿⣿⢸⠈⠀⡙⢿⣿⣿⣧⣤⣿⣿⣿⣿⣿⣿⠇⡆⣸⡇⣿⣿⣿⣿⠀⣦⢠⠈⠘⣿⣿⡇⠻⠀⠀⢻⡀⠀⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣸⣿⡿⠃⢠⣾⣿⡟⠀⣸⣿⢸⣿⣿⢸⠀⢸⣿⡦⡙⢿⣿⣿⣿⣿⣿⣿⠿⢋⣠⡆⡿⢸⣿⣿⣿⣿⠀⠛⠈⣿⡆⣿⣿⣿⡸⣦⠀⠀⢻⡄⠀       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣾⣟⠟⠀⢀⣾⣿⡟⠀⣴⣿⠁⣿⣿⣿⢸⢀⣿⣿⢡⣿⣦⠙⠿⠟⠛⠉⣤⣴⢁⣿⢠⢇⣿⡟⢸⣭⣴⣶⢀⢣⣿⡇⢿⣿⣿⡇⢿⡆⠰⠀⢻⣄       ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣶⣿⣿⡇⠀⢠⣿⣿⣿⢃⣼⣿⡏⣎⣿⣿⣿⢸⢁⣿⠏⣼⣿⣿⡀⢸⣿⡇⠀⢿⡏⡾⠟⡈⣼⣿⢱⣿⣿⣿⣿⠈⢸⣿⢷⢸⣿⣿⣿⠸⣷⡀⠂⠀⢿        ]],
          [[ ⠀⠀⠀⠀⠀⠀⠀⢀⣴⣿⡿⠋⣽⠄⣰⣿⣿⡟⠑⠿⣿⡿⠀⣾⡟⢹⣿⢸⢸⡟⢠⣿⣿⣿⠀⢸⣿⠁⠀⠈⢁⣶⣇⣠⣿⡏⣾⣿⣿⣿⣿⡄⠘⣿⠘⠀⢿⣿⣿⡆⣿⣷⡈⠀⠈        ]],
          [[ ⠀⠀⠀⠀⠀⠀⣠⣾⣿⠟⠀⠀⡟⣸⣿⡿⢫⣾⣿⣷⡿⠁⣽⠟⡡⣸⣿⢸⡞⠀⣈⣿⣿⡇⣸⢸⡿⠀⢸⠀⢸⡿⢸⣿⡿⢸⣿⣿⡿⠟⠛⣃⠀⣿⡇⡆⠸⣿⣿⣿⠘⣿⡧⠐⠀       ]],
          [[ ⠀⠀⠀⠀⢀⣴⣿⡿⠃⠀⠀⣰⣿⣿⡿⢡⣄⠻⠿⠟⢡⣴⠏⣼⡇⣿⡇⠀⣰⢃⣿⡿⣿⠁⡇⣾⡇⠀⠞⣠⣾⢃⣿⣿⢃⣿⢟⣵⡖⢋⣉⡉⡉⣹⡷⢀⠀⣿⣿⣿⣇⠻⣷⣄⠀       ]],
          [[ ⠀⠀⠀⢀⣾⣿⠟⠀⠀⢀⣾⣿⠿⠍⣠⣍⢻⠶⢋⣴⠿⢡⣾⣿⠁⣿⡇⢸⡏⣸⣿⢃⡟⣸⢀⡿⢃⢰⣿⣿⢸⣿⣿⠋⢈⣁⣸⣿⣿⣷⣶⡾⢟⡘⢿⣶⣶⣶⣶⣮⣭⣤⡹⣿⣆       ]],
          [[ ⠀⠀⢠⣿⣿⠏⣠⣽⣰⣿⡋⣤⣶⡌⣿⡟⢠⣾⡇⠁⣠⣿⡿⠁⡀⣿⡇⣿⢡⣿⠏⡾⢀⣹⡸⢁⣠⣿⣿⡏⢈⣿⡟⠀⣛⡻⠁⠙⠌⠛⢯⣴⣿⠟⣈⠻⢦⡶⢶⣶⠖⣢⣍⠸⣿       ]],
          [[ ⠀⢠⣿⣿⠏⠀⢿⣿⡇⣿⣇⢸⣿⡇⣿⢻⣿⢏⠀⣰⣿⠟⡰⢃⡄⣿⢡⡏⣾⢏⣼⡣⠟⣫⣴⣿⡿⠟⣉⠄⣼⣿⢡⣼⠟⠀⠀⢀⣤⢀⣴⠟⣥⣾⣿⣿⣶⣤⣤⣶⣾⣿⣿⣿⡄       ]],
          [[ ⢀⣾⣿⠟⣠⣾⡾⢿⡇⠹⣿⢸⡟⣠⣦⣾⢃⢮⣾⡿⢋⠔⣠⣾⡧⣿⢸⠟⢃⡾⠋⢀⠾⣿⣿⢿⣰⡿⢏⣤⣿⠃⠜⡁⠀⠀⢠⠞⣁⡾⢁⣼⣿⣿⣿⣿⣿⠿⠿⣿⣿⣿⡿⣿⣿       ]],
        },
          -- Waifu 5
        {
          [[ ⣇⣿⠘⣿⣿⣿⡿⡿⣟⣟⢟⢟⢝⠵⡝⣿⡿⢂⣼⣿⣷⣌⠩⡫⡻⣝⠹⢿⣿⣷ ]],
          [[ ⡆⣿⣆⠱⣝⡵⣝⢅⠙⣿⢕⢕⢕⢕⢝⣥⢒⠅⣿⣿⣿⡿⣳⣌⠪⡪⣡⢑⢝⣇ ]],
          [[ ⡆⣿⣿⣦⠹⣳⣳⣕⢅⠈⢗⢕⢕⢕⢕⢕⢈⢆⠟⠋⠉⠁⠉⠉⠁⠈⠼⢐⢕⢽ ]],
          [[ ⡗⢰⣶⣶⣦⣝⢝⢕⢕⠅⡆⢕⢕⢕⢕⢕⣴⠏⣠⡶⠛⡉⡉⡛⢶⣦⡀⠐⣕⢕ ]],
          [[ ⡝⡄⢻⢟⣿⣿⣷⣕⣕⣅⣿⣔⣕⣵⣵⣿⣿⢠⣿⢠⣮⡈⣌⠨⠅⠹⣷⡀⢱⢕ ]],
          [[ ⡝⡵⠟⠈⢀⣀⣀⡀⠉⢿⣿⣿⣿⣿⣿⣿⣿⣼⣿⢈⡋⠴⢿⡟⣡⡇⣿⡇⡀⢕ ]],
          [[ ⡝⠁⣠⣾⠟⡉⡉⡉⠻⣦⣻⣿⣿⣿⣿⣿⣿⣿⣿⣧⠸⣿⣦⣥⣿⡇⡿⣰⢗⢄ ]],
          [[ ⠁⢰⣿⡏⣴⣌⠈⣌⠡⠈⢻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣬⣉⣉⣁⣄⢖⢕⢕⢕ ]],
          [[ ⡀⢻⣿⡇⢙⠁⠴⢿⡟⣡⡆⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣵⣵⣿ ]],
          [[ ⡻⣄⣻⣿⣌⠘⢿⣷⣥⣿⠇⣿⣿⣿⣿⣿⣿⠛⠻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿ ]],
          [[ ⣷⢄⠻⣿⣟⠿⠦⠍⠉⣡⣾⣿⣿⣿⣿⣿⣿⢸⣿⣦⠙⣿⣿⣿⣿⣿⣿⣿⣿⠟ ]],
          [[ ⡕⡑⣑⣈⣻⢗⢟⢞⢝⣻⣿⣿⣿⣿⣿⣿⣿⠸⣿⠿⠃⣿⣿⣿⣿⣿⣿⡿⠁⣠ ]],
          [[ ⡝⡵⡈⢟⢕⢕⢕⢕⣵⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣶⣿⣿⣿⣿⣿⠿⠋⣀⣈⠙ ]],
          [[ ⡝⡵⡕⡀⠑⠳⠿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⠿⠛⢉⡠⡲⡫⡪⡪⡣ ]],
        },
      }

      -- Semilla aleatoria y selección
      math.randomseed(os.time())
      dashboard.section.header.val = headers[math.random(#headers)]

      dashboard.section.buttons.val = {
        dashboard.button("e", "►  Nuevo archivo", ":ene <BAR> startinsert <CR>"),
        dashboard.button("f", "■  Buscar archivo", ":Telescope find_files<CR>"),
        dashboard.button("r", "▲  Archivos recientes", ":Telescope oldfiles<CR>"),
        dashboard.button("q", "◆  Salir", ":qa<CR>"),
      }

      dashboard.section.footer.val =
        "✦  想像できれば、プログラムできます。✦"

      alpha.setup(dashboard.config)
    end,
  },

  -- Barra de estado
  { "nvim-lualine/lualine.nvim", dependencies = { "nvim-tree/nvim-web-devicons" } },

  -- Explorador de archivos
  { "nvim-tree/nvim-tree.lua", dependencies = { "nvim-tree/nvim-web-devicons" } },

  -- Telescope (buscador)
  { "nvim-telescope/telescope.nvim", tag = "0.1.5", dependencies = { "nvim-lua/plenary.nvim" } },

  -- Treesitter (resaltado moderno)
  { "nvim-treesitter/nvim-treesitter", build = ":TSUpdate" },

  -- Autocompletado
  { "hrsh7th/nvim-cmp" },
  { "hrsh7th/cmp-nvim-lsp" },
  { "hrsh7th/cmp-buffer" },
  { "hrsh7th/cmp-path" },
  { "hrsh7th/cmp-cmdline" },

  -- Snippets
  { "hrsh7th/vim-vsnip" },
  { "hrsh7th/cmp-vsnip" },

  -- LSP (Lenguajes)
  { "neovim/nvim-lspconfig" },
  { "williamboman/mason.nvim" },
  { "williamboman/mason-lspconfig.nvim" },
})

-- =========================
-- Opciones generales
-- =========================
vim.opt.number = true
vim.opt.relativenumber = true
vim.opt.tabstop = 4
vim.opt.shiftwidth = 4
vim.opt.expandtab = true
vim.opt.termguicolors = true
vim.opt.cursorline = true
vim.opt.mouse = "a"
vim.opt.clipboard = "unnamedplus"
vim.opt.scrolloff = 8 -- Mantener 8 líneas visibles al hacer scroll
vim.opt.sidescrolloff = 8
vim.opt.signcolumn = "yes" -- Columna de signos siempre visible
vim.opt.updatetime = 250 -- Faster updates
vim.opt.timeoutlen = 300 -- Tiempo de espera para keymaps
vim.opt.undofile = true -- Persistir deshacer entre sesiones
vim.opt.ignorecase = true -- Búsqueda insensible a mayúsculas
vim.opt.smartcase = true -- Pero sensible si incluyes mayúsculas

-- Colores
vim.cmd([[colorscheme tokyonight]])

-- =========================
-- Configuración de plugins
-- =========================

-- Lualine
require("lualine").setup({
  options = {
    theme = "tokyonight",
    section_separators = { "✦", "▸" },
    component_separators = { "✦", "►" },
  },
  sections = {
    lualine_a = { "mode" }, -- Modo (NORMAL, INSERT, VISUAL...) con color
    lualine_b = { "branch", 
            {"diff", symbols = {added = "🔰", modified="🔄", removed="💥"} }, 
            "diagnostics" }, -- Rama Git, cambios y diagnósticos LSP
    lualine_c = { "filename" }, -- Nombre del archivo activo
    lualine_x = { "encoding", "fileformat", "filetype" }, -- UTF-8, formato y tipo de archivo
    lualine_y = { "progress" }, -- Progreso en el archivo
    lualine_z = { "location" }, -- Línea y columna
  },
})

-- Nvim-tree
require("nvim-tree").setup({
  view = {
    width = 35,
    side = "left",
    number = true,
    relativenumber = true,
  },
  renderer = {
    highlight_opened_files = "name",
    indent_markers = { enable = true },
    highlight_git = true, -- Colores para estado Git
    icons = {
      show = {
        git = true,
        folder = true,
        file = true,
        folder_arrow = true,
      },
    },
  },
  git = {
    enable = true, -- Asegura que Nvim-tree lea el estado Git
  },
})
vim.keymap.set("n", "<leader>ee", ":NvimTreeToggle<CR>", { desc = "Toggle Explorer" })

-- Telescope
local builtin = require("telescope.builtin")
vim.keymap.set("n", "<leader>ff", builtin.find_files, { desc = "Buscar archivos" })
vim.keymap.set("n", "<leader>fg", builtin.live_grep, { desc = "Buscar texto" })
vim.keymap.set("n", "<leader>fb", builtin.buffers, { desc = "Buscar buffers" })
vim.keymap.set("n", "<leader>fh", builtin.help_tags, { desc = "Buscar ayuda" })

-- Treesitter
require("nvim-treesitter.configs").setup({
  ensure_installed = {
    -- Core
    "lua",
    "vim",
    "vimdoc",

    -- Frontend / Angular
    "javascript",
    "typescript",
    "tsx",
    "html",
    "css",
    "scss",
    "json",

    -- Backend / Fullstack
    "python",
    "php",
    "sql",

    -- Utilidades
    "bash",
    "markdown",
    "markdown_inline",
    "yaml",
    "dockerfile",
    "gitignore"
  },
  highlight = { enable = true },
  indent = { enable = true },
  incremental_selection = { enable = true },
  textobjects = { enable = true },
  autopairs = {
    enable = true,
  },
  rainbow = {
    enable = true,
    extended_mode = true,
  },
  indent = {
    enable = true,
    disable = { "yaml" } -- YAML tiene problemas con el indent automático
  },
})

-- Mason (gestor de LSP/DAP/formatters)
require("mason").setup()
require("mason-lspconfig").setup({
  ensure_installed = { 
    "lua_ls", 
    "pyright", 
    "ts_ls",
    "html",         -- HTML
    "cssls",        -- CSS
    "emmet_ls",     -- Emmet para HTML/CSS
    "tailwindcss",  -- Si usas Tailwind
    }
})

-- Configuración LSP
local lspconfig = require("lspconfig")
local capabilities = require("cmp_nvim_lsp").default_capabilities()

lspconfig.lua_ls.setup({ capabilities = capabilities })
lspconfig.pyright.setup({ capabilities = capabilities })
lspconfig.ts_ls.setup({ capabilities = capabilities })
lspconfig.html.setup({ capabilities = capabilities })
lspconfig.cssls.setup({ capabilities = capabilities })
lspconfig.emmet_ls.setup({ capabilities = capabilities })

vim.api.nvim_create_autocmd('LspAttach', {
  group = vim.api.nvim_create_augroup('UserLspConfig', {}),
  callback = function(ev)
    local opts = { buffer = ev.buf }
    
    -- Navegación de código
    vim.keymap.set('n', 'gd', vim.lsp.buf.definition, opts)
    vim.keymap.set('n', 'gD', vim.lsp.buf.declaration, opts)
    vim.keymap.set('n', 'gr', vim.lsp.buf.references, opts)
    vim.keymap.set('n', 'K', vim.lsp.buf.hover, opts)
    vim.keymap.set('n', '<leader>rn', vim.lsp.buf.rename, opts)
    vim.keymap.set('n', '<leader>ca', vim.lsp.buf.code_action, opts)
  end,
})

-- Autocompletado con snippets
local cmp = require("cmp")
cmp.setup({
  snippet = {
    expand = function(args)
      vim.fn["vsnip#anonymous"](args.body)
    end,
  },
  mapping = cmp.mapping.preset.insert({
    ["<C-Space>"] = cmp.mapping.complete(),
    ["<CR>"] = cmp.mapping.confirm({ select = true }),
    ["<Tab>"] = cmp.mapping(function(fallback)
      if cmp.visible() then
        cmp.select_next_item()
      else
        fallback()
      end
    end, { "i", "s" }),
    ["<S-Tab>"] = cmp.mapping(function(fallback)
      if cmp.visible() then
        cmp.select_prev_item()
      else
        fallback()
      end
    end, { "i", "s" }),
  }),
  sources = cmp.config.sources({
    { name = "nvim_lsp" },
    { name = "vsnip" },
    { name = "buffer" },
    { name = "path" },
  })
})


-- Gitsigns (integración con Git en la sign column)
require("gitsigns").setup({
  signs = {
    add          = { text = "┃" },
    change       = { text = "┃" },
    delete       = { text = "_" },
    topdelete    = { text = "‾" },
    changedelete = { text = "~" },
  },
  current_line_blame = true, -- Muestra autor y fecha de la última modificación en la línea
})

require('diffview').setup({
  enhanced_diff_hl = true, -- Mejor resaltado
  view = {
    default = {
      layout = "diff2_horizontal",
    },
  },
})

-- Configurar autopairs
require('nvim-autopairs').setup({})

-- Configurar autotag para HTML/JSX
require('nvim-ts-autotag').setup()

-- Configurar Comment.nvim
require('Comment').setup()

-- Configurar surround
require('nvim-surround').setup()

-- Configurar trouble para diagnósticos
require("trouble").setup({
  position = "bottom",
  height = 10,
})

-- Configuración explícita de devicons
require('nvim-web-devicons').setup({
  override = {
    zsh = {
      icon = "",
      color = "#428850",
      cterm_color = "65",
      name = "Zsh"
    }
  },
  color_icons = true,
  default = true,
  strict = true,
  override_by_filename = {
    [".gitignore"] = {
      icon = "",
      color = "#f1502f",
      name = "Gitignore"
    }
  },
  override_by_extension = {
    ["log"] = {
      icon = "",
      color = "#81e043",
      name = "Log"
    }
  },
})

-- =========================
-- Atajos rápidos (Keymaps)
-- =========================

-- Guardar y salir
vim.keymap.set("n", "<leader>w", ":w<CR>", { desc = "Guardar" })
vim.keymap.set("n", "<leader>q", ":q<CR>", { desc = "Cerrar" })
vim.keymap.set("n", "<leader>Q", ":q!<CR>", { desc = "Forzar cerrar sin guardar" })

-- Quitar highlight
vim.keymap.set("n", "<leader>h", ":nohlsearch<CR>", { desc = "Quitar highlight" })

-- Manejo de ventanas
vim.keymap.set("n", "<leader>sv", ":vsplit<CR>", { desc = "Dividir vertical" })
vim.keymap.set("n", "<leader>sh", ":split<CR>", { desc = "Dividir horizontal" })
vim.keymap.set("n", "<C-h>", "<C-w>h", { desc = "Ir izquierda" })
vim.keymap.set("n", "<C-l>", "<C-w>l", { desc = "Ir derecha" })
vim.keymap.set("n", "<C-j>", "<C-w>j", { desc = "Ir abajo" })
vim.keymap.set("n", "<C-k>", "<C-w>k", { desc = "Ir arriba" })

-- Manejo de buffers
vim.keymap.set("n", "<S-l>", ":bnext<CR>", { desc = "Buffer siguiente" })
vim.keymap.set("n", "<S-h>", ":bprevious<CR>", { desc = "Buffer anterior" })
vim.keymap.set("n", "<leader>c", ":bd<CR>", { desc = "Cerrar buffer" })

-- Explorador de archivos
vim.keymap.set("n", "<leader>e", ":NvimTreeToggle<CR>", { desc = "Abrir explorador" })

-- Telescope
vim.keymap.set("n", "<leader>ff", "<cmd>Telescope find_files<CR>", { desc = "Buscar archivos" })
vim.keymap.set("n", "<leader>fg", "<cmd>Telescope live_grep<CR>", { desc = "Buscar texto" })
vim.keymap.set("n", "<leader>fb", "<cmd>Telescope buffers<CR>", { desc = "Buscar buffers" })
vim.keymap.set("n", "<leader>fh", "<cmd>Telescope help_tags<CR>", { desc = "Buscar ayuda" })

-- LSP / Diagnósticos
vim.keymap.set("n", "<leader>f", function()
vim.lsp.buf.format({ async = true })
end, { desc = "Formatear código" })

vim.keymap.set("n", "<leader>d", vim.diagnostic.open_float, { desc = "Ver error" })
vim.keymap.set("n", "[d", vim.diagnostic.goto_prev, { desc = "Error anterior" })
vim.keymap.set("n", "]d", vim.diagnostic.goto_next, { desc = "Error siguiente" })

-- dashboard
vim.keymap.set("n", "<leader>a", ":Alpha<CR>", { desc = "Volver al Dashboard" })

-- Terminal
-- Salir de terminal a modo normal con <Esc>
vim.keymap.set("t", "<Esc>", [[<C-\><C-n>]], { desc = "Salir de terminal a normal" })
-- Abrir terminal abajo y entrar directamente en modo terminal
vim.keymap.set("n", "<leader>tt", ":split | terminal<CR>i", { desc = "Terminal abajo" })
-- Terminal específica para cada tarea
vim.keymap.set("n", "<leader>tf", "<cmd>ToggleTerm direction=float<cr>", { desc = "Terminal flotante" })
vim.keymap.set("n", "<leader>th", "<cmd>ToggleTerm size=15 direction=horizontal<cr>", { desc = "Terminal horizontal" })
vim.keymap.set("n", "<leader>tv", "<cmd>ToggleTerm size=50 direction=vertical<cr>", { desc = "Terminal vertical" })

-- Keymaps para diffview
vim.keymap.set("n", "<leader>gd", "<cmd>DiffviewOpen<cr>", { desc = "Git diff view" })
vim.keymap.set("n", "<leader>gc", "<cmd>DiffviewClose<cr>", { desc = "Close diff view" })
vim.keymap.set("n", "<leader>gh", "<cmd>DiffviewFileHistory<cr>", { desc = "File history" })

